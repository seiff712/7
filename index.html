<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Love Meter â¤ï¸</title>
  <link rel="stylesheet" href="7.css" />
</head>
<body>

<main class="app">
  <header class="hero">
    <div class="badge">â¤ï¸ Love Meter</div>
    <h1>Ù…Ù‚ÙŠØ§Ø³ Ø§Ù„Ø­Ø¨</h1>
    <p class="muted">Ø§ÙƒØªØ¨ÙŠ Ø§Ù„Ø§Ø³Ù… ÙˆØ§Ø¶ØºØ·ÙŠ â€œÙ‚ÙŠØ§Ø³â€</p>
  </header>

  <section class="panel">
    <label class="label" for="name">Ø§Ù„Ø§Ø³Ù…</label>
    <input class="inp" id="name" placeholder="Ø§ÙƒØªØ¨ÙŠ Ø§Ù„Ø§Ø³Ù…â€¦" autocomplete="off" />

    <button class="btn" id="go">Ù‚ÙŠØ§Ø³ ğŸ’–</button>

    <div class="bar" aria-label="Love progress">
      <div class="fill" id="fill" style="width:0%"></div>
    </div>

    <div class="result big" id="out">Ø¬Ø§Ù‡Ø²ØŸ</div>

    <div class="final" id="final" hidden>
      <h2>ğŸ Ø±Ø³Ø§Ù„Ø©</h2>
      <p id="msg"></p>
      <button class="btn2" id="again">Ù†Ø¬Ø±Ø¨ ØªØ§Ù†ÙŠ</button>
    </div>

    
  </section>
</main>

<!-- Layer Ù„Ù„Ù€ fireworks -->
<div id="fx" class="fx" aria-hidden="true"></div>

<script>
  // ============ SETTINGS (Ø¹Ø¯Ù‘Ù„ Ù‡Ù†Ø§) ============
  const RIGHT_NAME = "amany"; // â­ Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙˆØ­ÙŠØ¯ Ø§Ù„Ù„ÙŠ ÙŠØ·Ù„Ø¹ 100%
  const POSITIVE_MESSAGE = "Ø­Ø¨ ÙƒØ§Ù…Ù„ 100% â¤ï¸âœ¨";
  const NEGATIVE_MESSAGE = "0% âŒ Ø§Ù„Ø§Ø³Ù… Ø¯Ù‡ Ù…Ø´ Ù‡Ùˆ ğŸ˜„";
  // ============================================

  const nameEl = document.getElementById("name");
  const go = document.getElementById("go");
  const fill = document.getElementById("fill");
  const out = document.getElementById("out");
  const final = document.getElementById("final");
  const msg = document.getElementById("msg");
  const reset = document.getElementById("reset");
  const again = document.getElementById("again");
  const fx = document.getElementById("fx");

  let timer = null;

  function norm(s){ return (s || "").toString().trim().toLowerCase(); }

  function resetUI(){
    clearInterval(timer);
    fill.style.width = "0%";
    out.textContent = "Ø¬Ø§Ù‡Ø²ØŸ";
    final.hidden = true;
    msg.textContent = "";
    document.body.classList.remove("bg-win");
    document.body.classList.remove("glow");
    fx.innerHTML = "";
  }

  function fireworkBurst(x, y, count = 28){
    for (let i = 0; i < count; i++) {
      const p = document.createElement("span");
      p.className = "spark";

      const angle = Math.random() * Math.PI * 2;
      const dist  = 80 + Math.random() * 160;

      p.style.left = x + "px";
      p.style.top  = y + "px";
      p.style.setProperty("--dx", (Math.cos(angle) * dist).toFixed(1) + "px");
      p.style.setProperty("--dy", (Math.sin(angle) * dist).toFixed(1) + "px");
      p.style.setProperty("--s", (0.9 + Math.random() * 0.9).toFixed(2));
      p.style.setProperty("--d", (850 + Math.random() * 650).toFixed(0) + "ms");

      fx.appendChild(p);
      setTimeout(() => p.remove(), 1700);
    }
  }

  function launchCelebration(){
    // Glow + ØªØºÙŠÙŠØ± Ø®Ù„ÙÙŠØ©
    document.body.classList.add("bg-win");
    document.body.classList.add("glow");

    // 4-6 Ø§Ù†ÙØ¬Ø§Ø±Ø§Øª ÙÙŠ Ø£Ù…Ø§ÙƒÙ† Ù…Ø®ØªÙ„ÙØ©
    const w = window.innerWidth;
    const h = window.innerHeight;

    const points = [
      [w * 0.25, h * 0.35],
      [w * 0.75, h * 0.35],
      [w * 0.50, h * 0.25],
      [w * 0.35, h * 0.55],
      [w * 0.65, h * 0.55],
    ];

    let k = 0;
    const t = setInterval(() => {
      const [x, y] = points[k % points.length];
      fireworkBurst(x, y, 30);
      k++;
      if (k >= 6) clearInterval(t);
    }, 220);
  }

  function measure(){
    const input = (nameEl.value || "").trim();
    const who = input || "Ø¨Ø¯ÙˆÙ† Ø§Ø³Ù…";

    const ok = norm(input) === norm(RIGHT_NAME);
    const target = ok ? 100 : 0;

    msg.textContent = ok ? POSITIVE_MESSAGE : NEGATIVE_MESSAGE;

    // Ø±Ø¬Ù‘Ø¹ Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ Ù‚Ø¨Ù„ Ø§Ù„Ù‚ÙŠØ§Ø³
    document.body.classList.remove("bg-win", "glow");
    fx.innerHTML = "";

    clearInterval(timer);
    let p = 0;
    fill.style.width = "0%";
    out.textContent = "Ø¨Ù†Ù‚ÙŠØ³â€¦";
    final.hidden = true;

    timer = setInterval(() => {
      if (p < target) {
        p += 4;
        if (p > target) p = target;

        out.textContent = `${who} â€” Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${p}%`;
        fill.style.width = p + "%";
      } else {
        clearInterval(timer);
        out.textContent = `${who} â€” Ø§Ù„Ù†ØªÙŠØ¬Ø©: ${target}%`;
        final.hidden = false;

        // â­ Ù„Ùˆ Ø§Ù„Ø§Ø³Ù… ØµØ­ ÙˆÙˆØµÙ„ 100% â†’ fireworks + Ù†ÙˆØ±
        if (ok && target === 100) {
  // fireworks + Ø§Ù„Ø®Ù„ÙÙŠØ©
  launchCelebration();

  // bar ÙŠÙ‡ØªØ² ÙˆÙŠÙ†ÙˆÙ‘Ø±
  const bar = document.querySelector(".bar");
  bar.classList.add("shake", "glow");

  // Ù†Ø´ÙŠÙ„ Ø§Ù„Ø§Ù‡ØªØ²Ø§Ø² Ø¨Ø¹Ø¯ Ø´ÙˆÙŠØ© (Ø§Ù„Ù†ÙˆØ± ÙŠÙØ¶Ù„)
  setTimeout(() => bar.classList.remove("shake"), 500);
}

      }
    }, 40);
  }

  go.addEventListener("click", measure);
  nameEl.addEventListener("keydown", (e) => { if (e.key === "Enter") measure(); });
  reset.addEventListener("click", () => { nameEl.value = ""; resetUI(); });
  again.addEventListener("click", () => { nameEl.focus(); resetUI(); });

  resetUI();
  const bar = document.querySelector(".bar");
bar.classList.remove("shake", "glow");

</script>

</body>
</html>
